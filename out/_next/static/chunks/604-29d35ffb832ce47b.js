"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{9604:function(e,t,i){i.r(t),i.d(t,{SafetyProvider:function(){return SafetyProvider},useSafety:function(){return useSafety}});var a=i(7437),n=i(2265);let o=(0,n.createContext)(),useSafety=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useSafety must be used within a SafetyProvider");return e},SafetyProvider=e=>{let{children:t}=e,[i,r]=(0,n.useState)(92),[s,d]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[u,p]=(0,n.useState)([{id:1,type:"near_miss",title:"Near Miss: Scaffolding Instability",location:"Kuala Lumpur Tower Project",time:"10:30 AM",severity:"medium",status:"pending_review",description:"Scaffolding section showed signs of instability but was secured before any accident occurred.",potentialCost:75e3,costSaved:75e3,date:"2024-12-19",reportedBy:"System"},{id:2,type:"violation",title:"PPE Violation: No Helmet",location:"Penang Bridge Expansion",time:"09:45 AM",severity:"high",status:"resolved",description:"Worker found without safety helmet in restricted area. Issue resolved immediately.",date:"2024-12-19",reportedBy:"Siti Aishah"},{id:3,type:"inspection",title:"Equipment Inspection Passed",location:"Johor Bahru Industrial Park",time:"08:15 AM",severity:"low",status:"completed",description:"Routine equipment inspection completed successfully. All equipment in good condition.",date:"2024-12-19",reportedBy:"Raj Kumar"},{id:4,type:"near_miss",title:"Crane Load Nearly Dropped",location:"Kuala Lumpur Tower Project",time:"11:45 AM",severity:"high",status:"pending_review",description:"Crane load slipped but safety mechanisms prevented complete drop. No injuries or damage.",potentialCost:15e4,costSaved:15e4,date:"2024-12-19",reportedBy:"Ahmed Rahman"},{id:5,type:"violation",title:"Unauthorized Access Restricted Area",location:"Penang Bridge Expansion",time:"08:30 AM",severity:"medium",status:"active",description:"Unauthorized personnel found in restricted construction zone. Removed and escorted out.",date:"2024-12-19",reportedBy:"Security Team"}]),[m]=(0,n.useState)(3),[g,h]=(0,n.useState)("manager"),[v,y]=(0,n.useState)(!1),[S,f]=(0,n.useState)(null),[A,k]=(0,n.useState)(!1),[w,I]=(0,n.useState)(!1),[P,R]=(0,n.useState)(!1),[C,T]=(0,n.useState)(""),[M,j]=(0,n.useState)(""),[W,N]=(0,n.useState)(null),[E,x]=(0,n.useState)(!1),[B,L]=(0,n.useState)(null),[b,D]=(0,n.useState)("english"),[K,U]=(0,n.useState)([{id:1,type:"Hot Work",location:"Zone A - Building 2",requester:"John Smith",expiry:"2 hours",status:"active",issuedAt:"2024-12-19 10:00 AM",approvedBy:"Chong Wei Ming",site:"Kuala Lumpur Tower Project",description:"Welding and cutting operations on level 3",riskLevel:"medium",requirements:["Fire Extinguisher","Fire Watch","Safety Screens"]},{id:2,type:"Confined Space",location:"Zone B - Basement",requester:"Mike Johnson",expiry:"4 hours",status:"pending",issuedAt:"2024-12-19 09:30 AM",approvedBy:null,site:"Kuala Lumpur Tower Project",description:"Maintenance work in underground water tank",riskLevel:"high",requirements:["Gas Monitor","Ventilation","Rescue Team","Harness"]},{id:3,type:"Electrical Work",location:"Zone C - Panel Room",requester:"David Lee",expiry:"1 hour",status:"active",issuedAt:"2024-12-19 11:00 AM",approvedBy:"Chong Wei Ming",site:"Kuala Lumpur Tower Project",description:"Panel upgrade and maintenance",riskLevel:"low",requirements:["Lockout/Tagout","Insulated Tools","PPE"]}]),[q,H]=(0,n.useState)([{id:1,name:"Ahmed Rahman",employeeId:"WRK-2024-0892",role:"Construction Worker",department:"Structural Works",phone:"+6012-345-6789",email:"ahmed.rahman@safesite.ai",certifications:["PPE Certified","Height Safety","First Aid"],status:"active",siteAssigned:"Kuala Lumpur Tower Project",joinDate:"2024-01-15"},{id:2,name:"Michael Tan",employeeId:"WRK-2024-0893",role:"Electrician",department:"Electrical",phone:"+6012-345-6790",email:"michael.tan@safesite.ai",certifications:["Electrical Safety","Confined Space"],status:"active",siteAssigned:"Johor Bahru Industrial Park",joinDate:"2024-02-20"},{id:3,name:"Raj Kumar",employeeId:"WRK-2024-0894",role:"Crane Operator",department:"Heavy Machinery",phone:"+6012-345-6791",email:"raj.kumar@safesite.ai",certifications:["Crane Operation","Rigging","Signal Person"],status:"on_leave",siteAssigned:"Penang Bridge Expansion",joinDate:"2023-11-10"},{id:4,name:"Chong Wei Ming",employeeId:"WRK-2024-0895",role:"Site Supervisor",department:"Management",phone:"+6017-234-5678",email:"chong.wei@safesite.ai",certifications:["Supervisor Cert","Safety Management","First Aid"],status:"active",siteAssigned:"Kuala Lumpur Tower Project",joinDate:"2024-01-10"},{id:5,name:"Siti Aishah binti Omar",employeeId:"WRK-2024-0896",role:"Safety Officer",department:"Safety",phone:"+6019-345-6789",email:"siti.aishah@safesite.ai",certifications:["Safety Officer Cert","Risk Assessment","Environmental Management"],status:"active",siteAssigned:"Penang Bridge Expansion",joinDate:"2024-03-01"}]),[O,_]=(0,n.useState)([{id:1,name:"Kuala Lumpur Tower Project",location:"Jalan Tun Razak, KL",projectType:"High-rise Building",client:"Mega Construction Corp",supervisor:"Chong Wei Ming",status:"active",workersCount:25,area:"15000 sqm",description:"60-story commercial tower with shopping complex",hazards:["Working at Height","Crane Operations","Concrete Pouring"],lastInspection:"2024-12-18",startDate:"2024-01-15",expectedCompletion:"2025-12-31"},{id:2,name:"Penang Bridge Expansion",location:"George Town, Penang",projectType:"Infrastructure",client:"Public Works Department",supervisor:"Siti Aishah binti Omar",status:"active",workersCount:18,area:"50000 sqm",description:"Bridge expansion and reinforcement project",hazards:["Marine Construction","Heavy Machinery","Welding"],lastInspection:"2024-12-17",startDate:"2024-03-01",expectedCompletion:"2026-06-30"},{id:3,name:"Johor Bahru Industrial Park",location:"Tebrau, Johor Bahru",projectType:"Industrial",client:"Southern Manufacturing Sdn Bhd",supervisor:"Raj Kumar",status:"maintenance",workersCount:7,area:"25000 sqm",description:"Manufacturing facility and warehouse complex",hazards:["Chemical Storage","Forklift Operation","Electrical Work"],lastInspection:"2024-12-15",startDate:"2023-11-01",expectedCompletion:"2025-03-31"}]),z=[{id:1,username:"manager",password:"manager123",role:"manager",name:"John Smith",email:"john.smith@safesite.ai"},{id:2,username:"supervisor",password:"supervisor123",role:"supervisor",name:"Ahmed Rahman",email:"ahmed.rahman@safesite.ai"},{id:3,username:"worker",password:"worker123",role:"worker",name:"Michael Tan",email:"michael.tan@safesite.ai"}],addIncident=e=>{let t={id:u.length+1,...e,time:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),date:new Date().toISOString().split("T")[0],reportedBy:(null==l?void 0:l.name)||"System"};p([t,...u]),(null==l?void 0:l.role)!=="manager"&&L(t)},updateComplianceScore=e=>{r(Math.max(0,Math.min(100,e)))},getTranslatedText=(e,t)=>{var i,a;let n={"UNHOOKED HARNESS":{english:"WARNING: Unhooked Safety Harness",malay:"AMARAN: Tali pinggang keselamatan tidak dipasang",rojak:"WARNING: Unhooked Safety Harness! AMARAN: Tali pinggang keselamatan tidak dipasang!",bengali:"সতর্কতা: সুরক্ষা হারনেস খোলা আছে"},"NO HELMET":{english:"WARNING: No Safety Helmet Worn",malay:"AMARAN: Tidak memakai topi keselamatan",rojak:"WARNING: No Helmet! AMARAN: Tak pakai topi keselamatan!",bengali:"সতর্কতা: সুরক্ষা হেলমেট পরা হয়নি"},"UNAUTHORIZED ACCESS":{english:"WARNING: Unauthorized Access to Restricted Area",malay:"AMARAN: Akses tanpa kebenaran ke kawasan terhad",rojak:"WARNING: Unauthorized Access! AMARAN: Masuk kawasan larang tanpa izin!",bengali:"সতর্কতা: সীমাবদ্ধ এলাকায় অননুমোদিত প্রবেশ"}};return(null===(i=n[e])||void 0===i?void 0:i[t])||(null===(a=n[e])||void 0===a?void 0:a.english)||"WARNING: ".concat(e)};return(0,a.jsx)(o.Provider,{value:{complianceScore:i,incidentLogs:u,activeZones:m,currentPersona:g,setCurrentPersona:h,showModal:v,setShowModal:y,selectedIncident:S,reviewIncident:e=>{let t=u.find(t=>t.id===e);f(t),y(!0)},showAlert:P,setShowAlert:R,alertMessage:C,triggerViolationAlert:(e,t)=>{let a=getTranslatedText(t,b),n="".concat(a," (Worker: ").concat(e,")");T(n),j(t),R(!0),updateComplianceScore(i-2),addIncident({type:"violation",title:t,location:"Kuala Lumpur Tower Project",severity:"high",status:"active"}),setTimeout(()=>{R(!1)},5e3)},scanResult:W,simulateAIScan:e=>{N(null),setTimeout(()=>{let t={hot_work:{status:"approved",message:"Z.AI: Fire Extinguisher Detected. Permit Approved.",confidence:98},confined_space:{status:"warning",message:"Z.AI: Gas Levels Elevated. Additional Ventilation Required.",confidence:85},electrical:{status:"approved",message:"Z.AI: All Safety Measures in Place. Work Authorized.",confidence:95}};N(t[e]||t.hot_work)},2e3)},redZoneActive:E,simulateRedZone:()=>{x(!0),addIncident({type:"danger",title:"Worker Entered Restricted Red Zone",location:"Red Zone - High Risk Area",severity:"critical",status:"active"}),setTimeout(()=>{x(!1)},3e3)},addIncident,updateComplianceScore,isAuthenticated:s,currentUser:l,login:(e,t,i)=>{let a=z.find(a=>a.username===e&&a.password===t&&a.role===i);return a?(c(a),d(!0),h(i),{success:!0,user:a}):{success:!1,error:"Invalid credentials"}},logout:()=>{c(null),d(!1),h("manager")},mockUsers:z,workers:q,addWorker:e=>{let t={id:q.length+1,...e,employeeId:"WRK-2024-".concat(String(q.length+892).padStart(4,"0")),joinDate:new Date().toISOString().split("T")[0],status:"active"};return H([...q,t]),{success:!0,worker:t}},updateWorker:(e,t)=>(H(q.map(i=>i.id===e?{...i,...t}:i)),{success:!0}),deleteWorker:e=>(H(q.filter(t=>t.id!==e)),{success:!0}),showWorkerModal:A,setShowWorkerModal:k,sites:O,addSite:e=>{let t={id:O.length+1,...e,workersCount:0,status:"active",lastInspection:new Date().toISOString().split("T")[0]};return _([...O,t]),{success:!0,site:t}},updateSite:(e,t)=>(_(O.map(i=>i.id===e?{...i,...t}:i)),{success:!0}),deleteSite:e=>(_(O.filter(t=>t.id!==e)),{success:!0}),showSiteModal:w,setShowSiteModal:I,currentIncidentAlert:B,triggerIncidentAlert:e=>{L(e)},dismissIncidentAlert:()=>{L(null)},permits:K,approvePermit:e=>{var t,i,a;return U(K.map(t=>t.id===e?{...t,status:"active",approvedBy:(null==l?void 0:l.name)||"System",approvedAt:new Date().toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})}:t)),addIncident({type:"permit",title:"Permit Approved: ".concat(null===(t=K.find(t=>t.id===e))||void 0===t?void 0:t.type),location:(null===(i=K.find(t=>t.id===e))||void 0===i?void 0:i.location)||"Unknown Location",severity:"low",status:"completed",description:"".concat(null===(a=K.find(t=>t.id===e))||void 0===a?void 0:a.type," permit has been approved and is now active.")}),{success:!0}},rejectPermit:function(e){var t,i,a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Safety requirements not met";return U(K.map(t=>t.id===e?{...t,status:"rejected",rejectedBy:(null==l?void 0:l.name)||"System",rejectedReason:n}:t)),addIncident({type:"permit",title:"Permit Rejected: ".concat(null===(t=K.find(t=>t.id===e))||void 0===t?void 0:t.type),location:(null===(i=K.find(t=>t.id===e))||void 0===i?void 0:i.location)||"Unknown Location",severity:"medium",status:"completed",description:"".concat(null===(a=K.find(t=>t.id===e))||void 0===a?void 0:a.type," permit has been rejected. Reason: ").concat(n)}),{success:!0}},extendPermit:function(e){var t,i,a;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return U(K.map(t=>t.id===e?{...t,expiry:"".concat(n+2," hours")}:t)),addIncident({type:"permit",title:"Permit Extended: ".concat(null===(t=K.find(t=>t.id===e))||void 0===t?void 0:t.type),location:(null===(i=K.find(t=>t.id===e))||void 0===i?void 0:i.location)||"Unknown Location",severity:"low",status:"completed",description:"".concat(null===(a=K.find(t=>t.id===e))||void 0===a?void 0:a.type," permit has been extended by ").concat(n," hours.")}),{success:!0}},completePermit:e=>{var t,i,a;return U(K.map(t=>t.id===e?{...t,status:"completed",completedAt:new Date().toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})}:t)),addIncident({type:"permit",title:"Permit Completed: ".concat(null===(t=K.find(t=>t.id===e))||void 0===t?void 0:t.type),location:(null===(i=K.find(t=>t.id===e))||void 0===i?void 0:i.location)||"Unknown Location",severity:"low",status:"completed",description:"".concat(null===(a=K.find(t=>t.id===e))||void 0===a?void 0:a.type," permit has been completed successfully.")}),{success:!0}},addPermit:e=>{let t={id:K.length+1,...e,status:"pending",issuedAt:new Date().toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"}),approvedBy:null,approvedAt:null};return U([...K,t]),addIncident({type:"permit",title:"New Permit Request: ".concat(e.type),location:e.location||"Unknown Location",severity:"low",status:"pending_review",description:"New ".concat(e.type," permit request submitted by ").concat(e.requester,".")}),{success:!0,permit:t}},selectedLanguage:b,setSelectedLanguage:D,getTranslatedText,alertViolationType:M},children:t})}}}]);